> ### STEP 3 : 무한으로 중첩된 배열구조 분석

- #### 요구사항

  - 무한중첩 구조도 동작하게 한다. [[[[[]]]]]
  - 배열의 원소에는 숫자타입만 존재한다.
  - 복잡한 세부로직은 함수로 분리해본다.
  - 중복된 코드역시 함수로 분리해서 일반화한다.
  - **프로그래밍 설계를 같이 PR한다.**
  - hint : 중첩문제를 풀기 위해 stack구조를 활용해서 구현할 수도 있다.



- #### 실행결과

  ```javascript
  var str = "[123,[22,23,[11,[112233],112],55],33]";
  var result = ArrayParser(str);
  console.log(JSON.stringify(result, null, 2)); 
  
  //중첩된 배열을 분석했음으로, 결과 역시 중첩된 객체형태이다.
  ```



- #### 설계사항

  ![](https://i.imgur.com/HC2BoW6.png)

     흠 설계자료라고 하기는 좀 그렇지만, 이렇게 무엇인가를(?) 그려가면서 생각하는것이 가장 편하다.

     30분동안 잡고있었더니 두통이 올정도로 머리가 지끈지끈하다.

     해당 부분은 재귀를 통해서 구현하였으나 @crong 이 어떻게 평가해줄지 모르겠다 :)

     그리고 정규표현식 간단한것은 짤 수 있을정도로 해야하는가에 대한 궁금증이 생겼다.

     정규표현식을 왠만하면 사용하고 싶지는 않은데, 곰곰히 생각해보니 정규표현식만큼 편하고 간단하게 문자열을

     구분할 수 있는것이 있는가에 대한 답이 나오지 않는 이상은 정규표현식을 사용해야 할 것 같다.

     그래서 [자주쓰는 정규표현식을 모아놓으려고 Github gist](https://gist.github.com/antaehyeon/d80d4b90225ce86c269f26bc1c65cc97) 를 이용해보려고 한다.

  

- #### 구현사항
  - Class ArrayParser
    - constructor
      - resultObject : 결과값을 반환하기 위한 객체입니다.
      - dividedCharacterDatas[] : string 데이터를 한글자씩 분리하여 담는 배열입니다.
      - function divideString() : 파라미터로 들어오는 string 데이터를 한글자씩 분리합니다.
      - function createObject() : 객체를 만드는 메서드입니다.
      - function checkType(params) : 객체 중 Type 속성을 결정합니다.
      - function getResult() : 결과 객체를 반환합니다.

  

- #### 접근법

  Stack을 이용할까 생각했지만, 기존의 함수를 재사용하는 재귀방식으로 접근했습니다.

  테스트 케이스로 예를 들어보겠습니다.

  [123, `[22, 23, [11, [112233], 112], 55]`, 33]

  '두번째 괄호'를 만날 때 마다 데이터를 아래와 같이 새로 찢습니다.

  [22, 23, `[11, [112233], 112]`, 55]

  똑같이 찢습니다.

  [11, `[112233]`, 112]

  또 똑같이 찢습니다.

  [112233]

  각 데이터를 새로 생성한 ArrayParser Class 에 파라미터로 넘깁니다.

  여기서부터 똑같은 함수(createObject)가 재활용되며

  최종적으로 만들어진 객체는 resultObject 로 반환됩니다.

  반환된 Object 는 해당 Class 의 resultObject(결과 Object) 에 추가되며

  역시 똑같이 계속 반환되며, 최종적으로 한개의 Object로 만들어집니다.